
'use strict';var Module;Module||(Module=typeof Module !== 'undefined' ? Module : {});var p={},q;for(q in Module)Module.hasOwnProperty(q)&&(p[q]=Module[q]);var r=!1,u=!1,v=!1,aa=!1;r="object"===typeof window;u="function"===typeof importScripts;v="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node;aa=!r&&!v&&!u;var x="",y,z,A,B;
if(v)x=u?require("path").dirname(x)+"/":__dirname+"/",y=function(a,b){A||(A=require("fs"));B||(B=require("path"));a=B.normalize(a);return A.readFileSync(a,b?null:"utf8")},z=function(a){a=y(a,!0);a.buffer||(a=new Uint8Array(a));assert(a.buffer);return a},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),"undefined"!==typeof module&&(module.exports=Module),process.on("uncaughtException",function(a){throw a;}),process.on("unhandledRejection",C),Module.inspect=function(){return"[Emscripten Module object]"};
else if(aa)"undefined"!=typeof read&&(y=function(a){return read(a)}),z=function(a){if("function"===typeof readbuffer)return new Uint8Array(readbuffer(a));a=read(a,"binary");assert("object"===typeof a);return a},"undefined"!==typeof print&&("undefined"===typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!==typeof printErr?printErr:print);else if(r||u)u?x=self.location.href:document.currentScript&&(x=document.currentScript.src),x=0!==x.indexOf("blob:")?x.substr(0,
x.lastIndexOf("/")+1):"",y=function(a){var b=new XMLHttpRequest;b.open("GET",a,!1);b.send(null);return b.responseText},u&&(z=function(a){var b=new XMLHttpRequest;b.open("GET",a,!1);b.responseType="arraybuffer";b.send(null);return new Uint8Array(b.response)});var ba=console.log.bind(console),D=console.warn.bind(console);for(q in p)p.hasOwnProperty(q)&&(Module[q]=p[q]);p=null;var ca={"f64-rem":function(a,b){return a%b},"debugger":function(){}},noExitRuntime;"object"!==typeof WebAssembly&&D("no native wasm support detected");
var E,da=new WebAssembly.Table({initial:0,maximum:0,element:"anyfunc"}),ea=!1;function assert(a,b){a||C("Assertion failed: "+b)}function ha(a){var b=Module["_"+a];assert(b,"Cannot call unknown function "+a+", make sure it is exported");return b}
function ia(a,b,c,g){var l={string:function(d){var m=0;if(null!==d&&void 0!==d&&0!==d){var k=(d.length<<2)+1;m=F(k);var f=m,e=G;if(0<k){k=f+k-1;for(var t=0;t<d.length;++t){var h=d.charCodeAt(t);if(55296<=h&&57343>=h){var ra=d.charCodeAt(++t);h=65536+((h&1023)<<10)|ra&1023}if(127>=h){if(f>=k)break;e[f++]=h}else{if(2047>=h){if(f+1>=k)break;e[f++]=192|h>>6}else{if(65535>=h){if(f+2>=k)break;e[f++]=224|h>>12}else{if(f+3>=k)break;e[f++]=240|h>>18;e[f++]=128|h>>12&63}e[f++]=128|h>>6&63}e[f++]=128|h&63}}e[f]=
0}}return m},array:function(d){var m=F(d.length);H.set(d,m);return m}},n=ha(a),S=[];a=0;if(g)for(var w=0;w<g.length;w++){var fa=l[c[w]];fa?(0===a&&(a=ja()),S[w]=fa(g[w])):S[w]=g[w]}c=n.apply(null,S);c=function(d){if("string"===b)if(d){for(var m=G,k=d+NaN,f=d;m[f]&&!(f>=k);)++f;if(16<f-d&&m.subarray&&ka)d=ka.decode(m.subarray(d,f));else{for(k="";d<f;){var e=m[d++];if(e&128){var t=m[d++]&63;if(192==(e&224))k+=String.fromCharCode((e&31)<<6|t);else{var h=m[d++]&63;e=224==(e&240)?(e&15)<<12|t<<6|h:(e&
7)<<18|t<<12|h<<6|m[d++]&63;65536>e?k+=String.fromCharCode(e):(e-=65536,k+=String.fromCharCode(55296|e>>10,56320|e&1023))}}else k+=String.fromCharCode(e)}d=k}}else d="";else d="boolean"===b?!!d:d;return d}(c);0!==a&&la(a);return c}var ka="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0,I,H,G,J,K,L,M,N=16777216;E=new WebAssembly.Memory({initial:N/65536,maximum:N/65536});I=E.buffer;N=I.byteLength;var O=I;I=O;Module.HEAP8=H=new Int8Array(O);Module.HEAP16=J=new Int16Array(O);
Module.HEAP32=K=new Int32Array(O);Module.HEAPU8=G=new Uint8Array(O);Module.HEAPU16=new Uint16Array(O);Module.HEAPU32=new Uint32Array(O);Module.HEAPF32=L=new Float32Array(O);Module.HEAPF64=M=new Float64Array(O);K[640]=5245632;function P(a){for(;0<a.length;){var b=a.shift();if("function"==typeof b)b(Module);else{var c=b.j;"number"===typeof c?void 0===b.i?Module.dynCall_v(c):Module.dynCall_vi(c,b.i):c(void 0===b.i?null:b.i)}}}
var ma=[],na=[],oa=[],pa=[],qa=Math.abs,sa=Math.ceil,ta=Math.floor,ua=Math.min,Q=0,R=null,T=null;Module.preloadedImages={};Module.preloadedAudios={};function C(a){ba(a);D(a);ea=!0;throw new WebAssembly.RuntimeError("abort("+a+"). Build with -s ASSERTIONS=1 for more info.");}function U(a){var b=V;return String.prototype.startsWith?b.startsWith(a):0===b.indexOf(a)}function va(){return U("data:application/octet-stream;base64,")}var V="gol-worker.wasm";va()||(V=x+V);
function wa(){try{if(z)return z(V);throw"both async and sync fetching of the wasm failed";}catch(a){C(a)}}function xa(){return!r&&!u||"function"!==typeof fetch||U("file://")?new Promise(function(a){a(wa())}):fetch(V,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+V+"'";return a.arrayBuffer()}).catch(function(){return wa()})}
Module.asm=function(){function a(l){Module.asm=l.exports;Q--;0==Q&&(null!==R&&(clearInterval(R),R=null),T&&(l=T,T=null,l()))}function b(l){a(l.instance)}function c(l){return xa().then(function(n){return WebAssembly.instantiate(n,g)}).then(l,function(n){D("failed to asynchronously prepare wasm: "+n);C(n)})}var g={env:W,wasi_snapshot_preview1:W,global:{NaN,Infinity},"global.Math":Math,asm2wasm:ca};Q++;if(Module.instantiateWasm)try{return Module.instantiateWasm(g,a)}catch(l){return D("Module.instantiateWasm callback failed with error: "+
l),!1}(function(){if("function"!==typeof WebAssembly.instantiateStreaming||va()||U("file://")||"function"!==typeof fetch)return c(b);fetch(V,{credentials:"same-origin"}).then(function(l){return WebAssembly.instantiateStreaming(l,g).then(b,function(n){D("wasm streaming compile failed: "+n);D("falling back to ArrayBuffer instantiation");return c(b)})})})();return{}};var X,ya,W={__memory_base:1024,__table_base:0,b:function(){return G.length},a:function(){C("OOM")},memory:E,table:da};
Module.asm({},W,I);Module._free=function(){return(Module._free=Module.asm.c).apply(null,arguments)};Module._gol=function(){return(Module._gol=Module.asm.d).apply(null,arguments)};Module._malloc=function(){return(Module._malloc=Module.asm.e).apply(null,arguments)};
var F=Module.stackAlloc=function(){return(F=Module.stackAlloc=Module.asm.f).apply(null,arguments)},la=Module.stackRestore=function(){return(la=Module.stackRestore=Module.asm.g).apply(null,arguments)},ja=Module.stackSave=function(){return(ja=Module.stackSave=Module.asm.h).apply(null,arguments)};Module.cwrap=function(a,b,c,g){c=c||[];var l=c.every(function(n){return"number"===n});return"string"!==b&&l&&!g?ha(a):function(){return ia(a,b,c,arguments)}};
Module.setValue=function(a,b,c){c=c||"i8";"*"===c.charAt(c.length-1)&&(c="i32");switch(c){case "i1":H[a>>0]=b;break;case "i8":H[a>>0]=b;break;case "i16":J[a>>1]=b;break;case "i32":K[a>>2]=b;break;case "i64":ya=[b>>>0,(X=b,1<=+qa(X)?0<X?(ua(+ta(X/4294967296),4294967295)|0)>>>0:~~+sa((X-+(~~X>>>0))/4294967296)>>>0:0)];K[a>>2]=ya[0];K[a+4>>2]=ya[1];break;case "float":L[a>>2]=b;break;case "double":M[a>>3]=b;break;default:C("invalid type for setValue: "+c)}};
Module.getValue=function(a,b){b=b||"i8";"*"===b.charAt(b.length-1)&&(b="i32");switch(b){case "i1":return H[a>>0];case "i8":return H[a>>0];case "i16":return J[a>>1];case "i32":return K[a>>2];case "i64":return K[a>>2];case "float":return L[a>>2];case "double":return M[a>>3];default:C("invalid type for getValue: "+b)}return null};var Y;T=function za(){Y||Aa();Y||(T=za)};function Aa(){0<Q||(P(ma),0<Q||Y||(Y=!0,Module.calledRun=!0,ea||(P(na),P(oa),P(pa))))}Module.run=Aa;noExitRuntime=!0;Aa();
const Ba=Module.cwrap("gol","number",["number","number","number"]);let Z=null,Ca=null;onmessage=a=>{const b=[],c=[];null==Z&&(Z=Module._malloc(32E4),Ca=Module._malloc(48E4));a.data.forEach(g=>{c.push(g.x,g.y)});a=new Int32Array(c);Module.HEAP32.set(a,Z/a.BYTES_PER_ELEMENT);a=2*Ba(Z,Ca,a.length/2);a=new Int32Array(Module.HEAP32.buffer,Z,a);for(let g=0;g<a.length;g+=2)b.push({x:a[g],y:a[g+1]});postMessage(b)};
